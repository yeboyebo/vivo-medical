!function(u){"use strict";var l;u.fn.tatsuParallax=function(i){l=u(this),i=u.extend({speed:.4},i);function t(){var a,e,n,s,r=u(window).scrollTop();l.each(function(){var t;(a=u(this)).hasClass("tatsu-parallaxed")&&(s=a.data("speed")||i.speed,e=a.offset().top,n=a.outerHeight(!0),e+n<r||r+d<e||(t=0<e-d?e-d:0,a.find(".tatsu-parallax-element-wrap").css({transform:"translate3d( 0,"+Math.round((r-t)*-s)+"px, 0)"})))})}function a(t,o){(t?u(".tatsu-parallaxed"):l).find(".tatsu-parallax-element-wrap").each(function(){var t,a,e=u(this),n=e.parent(),s=n.outerHeight(),r=e.parent().offset().top,i=document.body.scrollHeight;n.data("speed")&&!o?t=n.data("speed"):(t=o,n.data({speed:o})),r+s+d<i?(a=Math.round((s+d)*t)+s,r<d&&(a=s+Math.round((s+r)*t))):a=e.parent().innerHeight()+Math.round((i-r)*t),e.height(a)})}var d=window.innerHeight;return u(window).on("resize",function(){d=window.innerHeight,a(!0),t()}),u(window).on("scroll",function(){requestAnimationFrame(function(){t()})}),l.each(function(){u(this).hasClass("tatsu-parallaxed")||u(this).addClass("tatsu-parallaxed")}),a(!1,i.speed),this}}(jQuery);