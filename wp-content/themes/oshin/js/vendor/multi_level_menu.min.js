!function(t){"use strict";var i=Modernizr.cssanimations,a={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"}[Modernizr.prefixed("animation")],u=function(e,n){var t=function(e){if(i){if(e.target!=this)return;this.removeEventListener(a,t)}n&&"function"==typeof n&&n.call()};i?e.addEventListener(a,t):t()};function s(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e}function e(e,n){this.el=e,this.options=s({},this.options),s(this.options,n),this.menus=jQuery(this.el).find(".menu-container").toArray(),this.current=0,this._init()}e.prototype.options={breadcrumbsCtrl:!1,initialBreadcrumb:"all",backCtrl:!0,initialDelay:200,itemsDelayInterval:60,direction:"r2l",onItemClick:function(e,n){return!1}},e.prototype._init=function(){this.menusArr=[];var s=this,r=jQuery(".be-sidemenu").attr("data-menu-alignment");if(this.options.backCtrl&&(this.backCtrl=document.createElement("button"),this.backCtrl.className="menu__back menu__back--hidden",this.backCtrl.setAttribute("aria-label","Go back"),this.backCtrl.innerHTML='<span class="icon icon--arrow-left"></span>'),jQuery("body").hasClass("overlay-left-align-menu")&&0<jQuery(".special-header-bottom-text").length){var e=jQuery(".special-header-bottom-text");e[0].clientHeight==e[0].scrollHeight&&jQuery(e).css("align-self",r)}this.menus.forEach(function(e,n){jQuery(e).hasClass("sub-menu")&&jQuery(e).prepend("<li class='menu-item'><span class = 'menu__back'><span class = 'icon icon--arrow-left'></span></span></li>");var t={menuEl:e,menuItems:[].slice.call(e.querySelectorAll(".menu-item"))},i=e.clientHeight,a=e.scrollHeight;s.menusArr.push(t),n===s.current&&classie.add(e,"menu__level--current"),i==a&&jQuery(e).css("justify-content",r)}),jQuery("body").hasClass("left-static-menu")&&(jQuery(".special-header-menu").css("display","block"),s.animateMenu("openMenu")),this._initEvents()},e.prototype._initEvents=function(){for(var r=this,e=0,n=this.menusArr.length;e<n;++e)this.menusArr[e].menuItems.forEach(function(e,s){0!=jQuery(e).find("span.sub-menu-controller").length&&e.querySelector(".sub-menu-controller").addEventListener("click",function(e){var n=jQuery(e.target).closest(".menu-item")[0].children[0],t=n.getAttribute("data-submenu"),i=n.innerHTML,a=r.el.querySelector('ul[data-menu="'+t+'"]');t&&a?(e.preventDefault(),r._openSubMenu(a,s,i)):(r.el.querySelector(".menu__link--current")&&classie.remove(r.el.querySelector(".menu__link--current"),"menu__link--current"),classie.add(n,"menu__link--current"),r.options.onItemClick(e,i))}),"#"!=jQuery(e).find("a").attr("href")&&void 0!==jQuery(e).find("a").attr("href")||e.addEventListener("click",function(e){var n=e.target.getAttribute("data-submenu"),t=e.target.innerHTML,i=r.el.querySelector('ul[data-menu="'+n+'"]');n&&i?(e.preventDefault(),r._openSubMenu(i,s,t)):(r.el.querySelector(".menu__link--current")&&classie.remove(r.el.querySelector(".menu__link--current"),"menu__link--current"),classie.add(e.target,"menu__link--current"),r.options.onItemClick(e,t))})});this.options.backCtrl&&jQuery(document).on("click",".menu__back",function(e){r._back()}),jQuery(document).on("click",".hamburger-nav-controller-wrap",function(e){jQuery("body").hasClass("perspective-left")||jQuery("body").hasClass("perspective-right")?jQuery("body").hasClass("perspectiveview-open")?jQuery("body").hasClass("perspectiveview-open")&&r.animateMenu("closeMenu"):r.animateMenu("openMenu"):jQuery("body").hasClass("side-menu-opened")?r.animateMenu("openMenu"):r.animateMenu("closeMenu")}),jQuery(document).on("click","#be-left-strip",function(e){jQuery("body").hasClass("perspective-right")?jQuery("body").hasClass("perspectiveview-open")?jQuery("body").hasClass("perspectiveview-open")&&r.animateMenu("closeMenu"):r.animateMenu("openMenu"):jQuery("body").hasClass("side-menu-opened")?r.animateMenu("openMenu"):r.animateMenu("closeMenu")}),jQuery(document).on("click","#main",function(){(jQuery("body").hasClass("side-menu-opened")||jQuery("body").hasClass("perspectiveview"))&&r.animateMenu("closeMenu")}),jQuery(document).on("click",".be-overlay-menu-close",function(){jQuery("body").hasClass("side-menu-opened")?r.animateMenu("openMenu"):r.animateMenu("closeMenu")}),jQuery(t).on("resize",function(){var t=jQuery(".be-sidemenu").attr("data-menu-alignment"),e=jQuery(".special-header-bottom-text");setTimeout(function(){jQuery("body").hasClass("overlay-left-align-menu")&&0<e.length&&(jQuery(e).css("align-self","auto"),e[0].clientHeight==e[0].scrollHeight?jQuery(e).css("align-self",t):jQuery(e).css("align-self","auto"));r.menus.forEach(function(e,n){e.clientHeight==e.scrollHeight?jQuery(e).css("justify-content",t):jQuery(e).css("justify-content","flex-start")})},500)}),document.addEventListener("keyup",function(e){(jQuery("body").hasClass("side-menu-opened")||jQuery("body").hasClass("perspectiveview"))&&(27===(e.keyCode||e.which)&&r.animateMenu("closeMenu"))})},e.prototype.animateMenu=function(t){var i=this,e=void 0!==i.menusArr[i.current]?i.menusArr[i.current].menuItems:[],a=e.length-1,n=jQuery(".special-header-bottom-text"),s=jQuery(".special-header-logo");0!=i.isAnimating&&void 0!==i.isAnimating||(i.isAnimating=!0,e.forEach(function(e,n){if(e.style.WebkitAnimationDelay=e.style.animationDelay=parseInt(n*i.options.itemsDelayInterval+i.options.initialDelay)+"ms",n==a&&u(e,function(){if("closeMenu"==t)classie.remove(i.menusArr[i.current].menuEl,"animate-closemenu");else if("openMenu"==t)switch(i.options.direction){case"r2l":classie.remove(i.menusArr[i.current].menuEl,"animate-inFromRight");break;case"l2r":classie.remove(i.menusArr[i.current].menuEl,"animate-inFromLeft");break;case"t2b":classie.remove(i.menusArr[i.current].menuEl,"animate-inFromTop");break;case"b2t":classie.remove(i.menusArr[i.current].menuEl,"animate-inFromBottom")}i.isAnimating=!1}),"closeMenu"==t)e.style.WebkitAnimationDelay=e.style.animationDelay=parseInt(0)+"ms",classie.add(i.menusArr[i.current].menuEl,"animate-closemenu"),i.isAnimating=!1;else if("openMenu"==t)switch(i.options.direction){case"r2l":classie.add(i.menusArr[i.current].menuEl,"animate-inFromRight");break;case"l2r":classie.add(i.menusArr[i.current].menuEl,"animate-inFromLeft");break;case"t2b":classie.add(i.menusArr[i.current].menuEl,"animate-inFromTop");break;case"b2t":classie.add(i.menusArr[i.current].menuEl,"animate-inFromBottom")}}));var r=function(e){if("closeMenu"==t)e.removeClass("animate-closemenu");else if("openMenu"==t)switch(i.options.direction){case"r2l":e.removeClass("animate-inFromRight");break;case"l2r":e.removeClass("animate-inFromLeft");break;case"t2b":e.removeClass("animate-inFromTop");break;case"b2t":e.removeClass("animate-inFromBottom")}};if(0!=n.length&&u(n[0],r.bind(null,n)),0!=s.length&&u(s[0],r.bind(null,s)),"closeMenu"==t)n.css("animation-delay",parseInt(0)+"ms"),s.css("animation-delay",parseInt(0)+"ms"),n.addClass("animate-closemenu"),s.addClass("animate-closemenu");else if("openMenu"==t){switch(n.css("animation-delay",parseInt(i.options.initialDelay)+"ms"),s.css("animation-delay",parseInt(i.options.initialDelay)+"ms"),i.options.direction){case"r2l":n.addClass("animate-inFromRight"),s.addClass("animate-inFromRight");break;case"l2r":n.addClass("animate-inFromLeft"),s.addClass("animate-inFromLeft");break;case"t2b":n.addClass("animate-inFromTop"),s.addClass("animate-inFromTop");break;case"b2t":n.addClass("animate-inFromBottom"),s.addClass("animate-inFromBottom")}jQuery("body").hasClass("left-static-menu")&&(n.css("visibility","visible"),s.css("visibility","visible"))}},e.prototype._openSubMenu=function(e,n,t){if(this.isAnimating)return!1;this.isAnimating=!0,this.menusArr[this.menus.indexOf(e)].backIdx=this.current,this.menusArr[this.menus.indexOf(e)].name=t,this._menuOut(n),this._menuIn(e,n)},e.prototype._back=function(){if(this.isAnimating)return!1;this.isAnimating=!0,this._menuOut();var e=this.menusArr[this.menusArr[this.current].backIdx].menuEl;this._menuIn(e),this.options.breadcrumbsCtrl&&this.breadcrumbsCtrl.removeChild(this.breadcrumbsCtrl.lastElementChild)},e.prototype._menuOut=function(t){var i=this,e=this.menusArr[this.current].menuEl,a=void 0===t;switch(this.menusArr[this.current].menuItems.forEach(function(e,n){e.style.WebkitAnimationDelay=e.style.animationDelay=a?parseInt(n*i.options.itemsDelayInterval)+"ms":parseInt(Math.abs(t-n)*i.options.itemsDelayInterval)+"ms"}),this.options.direction){case"r2l":classie.add(e,a?"animate-outToRight":"animate-outToLeft");break;case"l2r":classie.add(e,a?"animate-outToLeft":"animate-outToRight");break;case"t2b":classie.add(e,a?"animate-outToTop":"animate-outToBottom");break;case"b2t":classie.add(e,a?"animate-outToBottom":"animate-outToTop")}},e.prototype._menuIn=function(t,i){var a=this,s=this.menusArr[this.current].menuEl,r=void 0===i,o=this.menus.indexOf(t),e=this.menusArr[o].menuItems,m=e.length;switch(e.forEach(function(e,n){e.style.WebkitAnimationDelay=e.style.animationDelay=r?parseInt(n*a.options.itemsDelayInterval)+"ms":parseInt(Math.abs(i-n)*a.options.itemsDelayInterval)+"ms",n===(i<=m/2||r?m-1:0)&&u(e,function(){switch(a.options.direction){case"r2l":classie.remove(s,r?"animate-outToRight":"animate-outToLeft"),classie.remove(t,r?"animate-inFromLeft":"animate-inFromRight");break;case"l2r":classie.remove(s,r?"animate-outToLeft":"animate-outToRight"),classie.remove(t,r?"animate-inFromRight":"animate-inFromLeft");break;case"t2b":classie.remove(s,r?"animate-outToTop":"animate-outToBottom"),classie.remove(t,r?"animate-inFromBottom":"animate-inFromTop");break;case"b2t":classie.remove(s,r?"animate-outToBottom":"animate-outToTop"),classie.remove(t,r?"animate-inFromTop":"animate-inFromBottom")}classie.remove(s,"menu__level--current"),classie.add(t,"menu__level--current"),a.current=o,a.isAnimating=!1})}),this.options.direction){case"r2l":classie.add(t,r?"animate-inFromLeft":"animate-inFromRight");break;case"l2r":classie.add(t,r?"animate-inFromRight":"animate-inFromLeft");break;case"t2b":classie.add(t,r?"animate-inFromBottom":"animate-inFromTop");break;case"b2t":classie.add(t,r?"animate-inFromTop":"animate-inFromBottom")}},e.prototype._addBreadcrumb=function(i){if(!this.options.breadcrumbsCtrl)return!1;var a=document.createElement("a");a.innerHTML=i?this.menusArr[i].name:this.options.initialBreadcrumb,this.breadcrumbsCtrl.appendChild(a);var s=this;a.addEventListener("click",function(e){if(e.preventDefault(),!a.nextSibling||s.isAnimating)return!1;s.isAnimating=!0,s._menuOut();var n,t=s.menusArr[i].menuEl;for(s._menuIn(t);n=a.nextSibling;)s.breadcrumbsCtrl.removeChild(n)})},t.MLMenu=e}(window);